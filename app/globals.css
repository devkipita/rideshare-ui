@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* -----------------------------
   ✅ Brand seeds (dynamic knobs)
   ----------------------------- */
:root {
  --brand-primary: 0.378 0.073 169; /* #064e3b */
  --brand-secondary: 0.786 0.064 148; /* #9ec5a2 */
  --brand-accent: 0.601 0.132 162; /* ~#009867 from your lab() */

  /* -----------------------------
     ✅ M3-ish surfaces (light)
     ----------------------------- */
  --background: 0.985 0.01 155;
  --foreground: 0.18 0.02 170;

  --card: 0.992 0.008 155;
  --card-foreground: var(--foreground);

  --popover: 0.992 0.008 155;
  --popover-foreground: var(--foreground);

  /* Roles */
  --primary: var(--brand-primary);
  --primary-foreground: 0.985 0.004 155;

  /* Use your brand secondary as actual “secondary” role */
  --secondary: var(--brand-secondary);
  --secondary-foreground: 0.18 0.02 170;

  /* Accent in shadcn is usually “hover/selection surface”.
     Keep it soft; use brand-accent separately for glows/rings. */
  --accent: 0.94 0.018 155;
  --accent-foreground: 0.18 0.02 170;

  --muted: 0.965 0.012 155;
  --muted-foreground: 0.5 0.02 170;

  --destructive: 0.577 0.245 27.325;
  --destructive-foreground: 0.985 0.004 155;

  --border: 0.93 0.01 155;
  --input: 0.965 0.012 155;

  /* Focus ring: use your vivid accent so it reads like M3 */
  --ring: var(--brand-accent);

  /* Extra M3 helpers (optional but useful in components) */
  --surface-low: 0.995 0.005 155;
  --surface: 0.985 0.01 155;
  --surface-high: 0.972 0.012 155;

  /* Charts (based on your brand family) */
  --chart-1: var(--brand-primary);
  --chart-2: var(--brand-accent);
  --chart-3: 0.7 0.07 165;
  --chart-4: 0.62 0.08 150;
  --chart-5: 0.52 0.09 170;

  --radius: 0.9rem;

  --sidebar: var(--background);
  --sidebar-foreground: var(--foreground);
  --sidebar-primary: var(--primary);
  --sidebar-primary-foreground: var(--primary-foreground);
  --sidebar-accent: var(--accent);
  --sidebar-accent-foreground: var(--accent-foreground);
  --sidebar-border: var(--border);
  --sidebar-ring: var(--ring);
}

.dark {
  /* -----------------------------
     ✅ M3-ish surfaces (dark)
     ----------------------------- */
  --background: 0.14 0.015 170;
  --foreground: 0.96 0.008 155;

  --card: 0.18 0.015 170;
  --card-foreground: var(--foreground);

  --popover: 0.18 0.015 170;
  --popover-foreground: var(--foreground);

  /* Primary gets brighter in dark (still same hue) */
  --primary: 0.72 0.075 169;
  --primary-foreground: 0.14 0.015 170;

  /* Secondary tuned for dark (still your secondary vibe) */
  --secondary: 0.6 0.055 148;
  --secondary-foreground: 0.14 0.015 170;

  --accent: 0.22 0.015 170;
  --accent-foreground: var(--foreground);

  --muted: 0.22 0.015 170;
  --muted-foreground: 0.72 0.02 160;

  --destructive: 0.55 0.2 27.325;
  --destructive-foreground: var(--foreground);

  --border: 0.26 0.015 170;
  --input: 0.22 0.015 170;

  --ring: 0.72 0.09 162; /* brighter ring in dark */

  --surface-low: 0.16 0.015 170;
  --surface: 0.14 0.015 170;
  --surface-high: 0.22 0.015 170;

  --chart-1: var(--primary);
  --chart-2: 0.72 0.09 162;
  --chart-3: 0.68 0.07 170;
  --chart-4: 0.62 0.08 150;
  --chart-5: 0.62 0.09 165;

  --sidebar: 0.16 0.015 170;
  --sidebar-foreground: var(--foreground);
  --sidebar-primary: var(--primary);
  --sidebar-primary-foreground: var(--primary-foreground);
  --sidebar-accent: var(--accent);
  --sidebar-accent-foreground: var(--accent-foreground);
  --sidebar-border: var(--border);
  --sidebar-ring: var(--ring);
}

/* Tailwind v4 theme mapping */
@theme inline {
  --font-sans: "Poppins", system-ui, sans-serif;
  --font-poppins: "Poppins", system-ui, sans-serif;
  --font-mono: "Geist Mono", "Geist Mono Fallback";
  --font-lexend: "Lexend", "Poppins", system-ui, sans-serif;

  --color-background: oklch(var(--background));
  --color-foreground: oklch(var(--foreground));

  --color-card: oklch(var(--card));
  --color-card-foreground: oklch(var(--card-foreground));

  --color-popover: oklch(var(--popover));
  --color-popover-foreground: oklch(var(--popover-foreground));

  --color-primary: oklch(var(--primary));
  --color-primary-foreground: oklch(var(--primary-foreground));

  --color-secondary: oklch(var(--secondary));
  --color-secondary-foreground: oklch(var(--secondary-foreground));

  --color-muted: oklch(var(--muted));
  --color-muted-foreground: oklch(var(--muted-foreground));

  --color-accent: oklch(var(--accent));
  --color-accent-foreground: oklch(var(--accent-foreground));

  --color-destructive: oklch(var(--destructive));
  --color-destructive-foreground: oklch(var(--destructive-foreground));

  --color-border: oklch(var(--border));
  --color-input: oklch(var(--input));
  --color-ring: oklch(var(--ring));

  --color-chart-1: oklch(var(--chart-1));
  --color-chart-2: oklch(var(--chart-2));
  --color-chart-3: oklch(var(--chart-3));
  --color-chart-4: oklch(var(--chart-4));
  --color-chart-5: oklch(var(--chart-5));

  --radius-sm: calc(var(--radius) - 6px);
  --radius-md: calc(var(--radius) - 3px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 6px);

  --color-sidebar: oklch(var(--sidebar));
  --color-sidebar-foreground: oklch(var(--sidebar-foreground));
  --color-sidebar-primary: oklch(var(--sidebar-primary));
  --color-sidebar-primary-foreground: oklch(var(--sidebar-primary-foreground));
  --color-sidebar-accent: oklch(var(--sidebar-accent));
  --color-sidebar-accent-foreground: oklch(var(--sidebar-accent-foreground));
  --color-sidebar-border: oklch(var(--sidebar-border));
  --color-sidebar-ring: oklch(var(--sidebar-ring));
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  html,
  body {
    height: 100%;
  }
  body {
    @apply bg-background text-foreground;
  }

  button:not(:disabled),
  [role='button'] {
    cursor: pointer;
  }

  button:disabled {
    cursor: not-allowed;
  }

  .overflow-y-auto::-webkit-scrollbar {
    width: 0;
    height: 0;
  }
  .overflow-y-auto {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  input[type="date"] {
    color-scheme: light;
  }
  .dark input[type="date"] {
    color-scheme: dark;
  }
  input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(0);
  }
  .dark input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
  }
}

@layer utilities {
  /* ✅ No more hard-coded Tailwind greens */
  .app-backdrop {
    background:
      radial-gradient(
        620px 520px at 50% -10%,
        oklch(var(--brand-accent) / 0.18),
        transparent 55%
      ),
      radial-gradient(
        680px 560px at 50% 110%,
        oklch(var(--brand-primary) / 0.16),
        transparent 60%
      ),
      oklch(var(--background));
  }

  .glass {
    background-color: color-mix(
      in oklch,
      oklch(var(--card)) 88%,
      oklch(var(--brand-accent) / 0.1)
    );
    backdrop-filter: blur(14px);
    border: 1px solid
      color-mix(
        in oklch,
        oklch(var(--border)) 70%,
        oklch(var(--brand-accent) / 0.2)
      );
  }

  .glass-card {
    background-color: color-mix(
      in oklch,
      oklch(var(--card)) 92%,
      oklch(var(--brand-accent) / 0.09)
    );
    backdrop-filter: blur(14px);
    border: 1px solid
      color-mix(
        in oklch,
        oklch(var(--border)) 70%,
        oklch(var(--brand-accent) / 0.18)
      );
    border-radius: 1.25rem;
    box-shadow: 0 18px 44px -34px oklch(var(--brand-primary) / 0.28);
  }

  .dark .glass-card {
    box-shadow: 0 18px 54px -40px rgba(0, 0, 0, 0.85);
  }

  .soft-shadow {
    box-shadow: 0 10px 28px -22px oklch(var(--brand-primary) / 0.18);
    transition: all 300ms cubic-bezier(0.22, 1, 0.36, 1);
  }
  .soft-shadow:hover {
    box-shadow: 0 14px 36px -26px oklch(var(--brand-primary) / 0.26);
  }

  .touch-target {
    min-height: 3rem;
    min-width: 3rem;
  }
  .smooth-transition {
    transition: all 300ms cubic-bezier(0.22, 1, 0.36, 1);
  }
}
